<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>Syllabus Template Slides</title>
    <link rel="stylesheet" href="./../css/reveal.css" />
    <link rel="stylesheet" href="./../css/theme/black.css" id="theme" />
    <link rel="stylesheet" href="./../css/highlight/zenburn.css" />
    <link rel="stylesheet" href="./../css/print/paper.css" type="text/css" media="print" />
    <link rel="stylesheet" href="./../assets/Reveal/makeschool.css" />

    <script>
      document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>');
    </script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides"><section  data-markdown><script type="text/template">
## In Class Activity

Making the necessary changes in a core data app to use multiple ManagedObjectContexts is not that complicated and it doesn't require many steps.

What's challenging is identifying the need to apply multiple MOC.

[This tutorial](https://www.raywenderlich.com/7586-multiple-managed-object-contexts-with-core-data-tutorial) uses an app that logs entries in a surf journal and rates surf sessions. The starter code can be found [here](https://koenig-media.raywenderlich.com/uploads/2018/09/multiple-managed-ob-ject-contexts-Swift-4.2.zip)

Before starting the tutorial, make sure you are able to run the project. See that there is an export functionality that will take all the contents of the table into a CSV file. Try scrolling the table and then try to export the content. Look out for the main problem we want to solve.

Go over the tutorial to fix the issue.
There are two main things you should have in the end:
- Created a `ManagedObjectContext` that works in the background.
- Used a child context to make edits in the ManagedObjects before hitting save.

## Discussion questions

- How did the app populated all the data when we fist opened it?
- What was the problem with exporting the data to CSV?
- When is it a good moment to start introducing multiple managed object contexts?
- What is a benefit from doing this?
- What can go wrong?
- What is `performBackgroundTask` doing in the app?
- What is the difference between Private an Main queues?
- What is `childContext.parent = coreDataStack.mainContext` doing for us?
- Why you we to pass the managed object *and* the managed object context to the `detailViewController`?


## Stretch Challenge for the tutorial
Change `SegueListToDetailAdd` to use a child context when adding a new journal entry. You will need to create a child context that has the main context as its parent. And create the new entry on the correct context.
</script></section></div>
    </div>

    <script src="./../js/reveal.js"></script>

    <script>
      function extend() {
        var target = {};
        for (var i = 0; i < arguments.length; i++) {
          var source = arguments[i];
          for (var key in source) {
            if (source.hasOwnProperty(key)) {
              target[key] = source[key];
            }
          }
        }
        return target;
      }

      // Optional libraries used to extend on reveal.js
      var deps = [
        { src: './../plugin/markdown/marked.js', condition: function() { return !!document.querySelector('[data-markdown]'); } },
        { src: './../plugin/markdown/markdown.js', condition: function() { return !!document.querySelector('[data-markdown]'); } },
        { src: './../plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
        { src: './../plugin/zoom-js/zoom.js', async: true },
        { src: './../plugin/notes/notes.js', async: true },
        { src: './../plugin/math/math.js', async: true }
      ];

      // default options to init reveal.js
      var defaultOptions = {
        controls: true,
        progress: true,
        history: true,
        center: true,
        transition: 'default', // none/fade/slide/convex/concave/zoom
        dependencies: deps
      };

      // options from URL query string
      var queryOptions = Reveal.getQueryHash() || {};

      var options = extend(defaultOptions, {"controls":true,"progress":true,"autoPlayMedia":false,"slideNumber":"c/t","showSlideNumber":"all","controlsTutorial":true,"controlsLayout":"edges","transition":"slide","transitionSpeed":"medium","minScale":0.5,"maxScale":3}, queryOptions);
    </script>


    <script>
      Reveal.initialize(options);
    </script>
  </body>
</html>
